{"version":3,"sources":["index.js"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.js","sourcesContent":["(function(e, a) { for(var i in a) e[i] = a[i]; }(exports, /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// define __esModule on exports\n/******/ \t__webpack_require__.r = function(exports) {\n/******/ \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n/******/ \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n/******/ \t\t}\n/******/ \t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t};\n/******/\n/******/ \t// create a fake namespace object\n/******/ \t// mode & 1: value is a module id, require it\n/******/ \t// mode & 2: merge all properties of value into the ns\n/******/ \t// mode & 4: return value when already ns object\n/******/ \t// mode & 8|1: behave like require\n/******/ \t__webpack_require__.t = function(value, mode) {\n/******/ \t\tif(mode & 1) value = __webpack_require__(value);\n/******/ \t\tif(mode & 8) return value;\n/******/ \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n/******/ \t\tvar ns = Object.create(null);\n/******/ \t\t__webpack_require__.r(ns);\n/******/ \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n/******/ \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n/******/ \t\treturn ns;\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 1);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction isFn(fn) {\n    return typeof fn === \"function\";\n}\nexports.isFn = isFn;\nfunction isObj(obj) {\n    return typeof obj === \"object\";\n}\nexports.isObj = isObj;\nfunction isStr(str) {\n    return typeof str === \"string\";\n}\nexports.isStr = isStr;\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\n\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar util_1 = __webpack_require__(0);\nvar provider_1 = __webpack_require__(2);\nvar Modal = /** @class */ (function () {\n    function Modal(options) {\n        var name = Object.assign({}, options).name;\n        var traditional = util_1.isStr(name);\n        this.options = Object.assign({\n            failKey: traditional ? String(name) + \"Fail\" : Symbol(),\n            name: Symbol(),\n            provider: provider_1.defaultProvider,\n            selfClosing: true,\n            successKey: traditional ? String(name) + \"Success\" : Symbol(),\n        }, options);\n    }\n    Object.defineProperty(Modal.prototype, \"visible\", {\n        /**\n         * Get the modal box display status\n         */\n        get: function () {\n            var _a = this.options, target = _a.target, name = _a.name, provider = _a.provider;\n            var modalData = provider.getData.call(target, name);\n            return modalData && modalData.visible;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Modal.prototype, \"data\", {\n        /**\n         * Get the binding data by the modal box\n         */\n        get: function () {\n            var _a = this.options, target = _a.target, name = _a.name, provider = _a.provider;\n            var modalData = provider.getData.call(target, name);\n            return modalData && modalData.data;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Modal.prototype, \"success\", {\n        /**\n         * Get the registered success callback function.\n         * It is generally used for the callback function of operation success, confirmation and other operations.\n         */\n        get: function () {\n            var _a = this.options, target = _a.target, successKey = _a.successKey;\n            return target && target[successKey];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Modal.prototype, \"fail\", {\n        /**\n         * Get the registered failure function.\n         * It can be a callback function for operations such as error handling, closing, and canceling events.\n         */\n        get: function () {\n            var _a = this.options, target = _a.target, failKey = _a.failKey;\n            return target && target[failKey];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Bind this argument with page or component object.\n     * @param thisArg page or component object.\n     * @example\n     * const modal=new Modal({target: someObj})\n     *\n     * equals to\n     *\n     * const modal=new Modal();\n     * modal.bind(someObj);\n     */\n    Modal.prototype.bind = function (thisArg) {\n        this.options = this.options || {};\n        this.options.target = thisArg;\n        return this;\n    };\n    /**\n     * Show modal.\n     * @param data modal data.\n     * @param extra extra object data to set.\n     */\n    Modal.prototype.show = function (data, extra) {\n        var _a;\n        var _this = this;\n        var _b = this.options, target = _b.target, provider = _b.provider, successKey = _b.successKey, failKey = _b.failKey, name = _b.name, selfClosing = _b.selfClosing;\n        if (!target) {\n            throw new Error(\"Please bind this argument by bind method first.\");\n        }\n        var promise = new Promise(function (resolve, reject) {\n            target[successKey] = resolve;\n            target[failKey] = reject;\n        });\n        provider.setData.call(target, __assign((_a = {}, _a[name] = { visible: true, data: data }, _a), (util_1.isObj(extra) && extra != null ? extra : {})));\n        if (selfClosing) {\n            promise = promise.finally(function () { return _this.hide(); });\n        }\n        return promise;\n    };\n    /**\n     * Hide modal\n     */\n    Modal.prototype.hide = function () {\n        var _a;\n        var _b = this.options, name = _b.name, provider = _b.provider, target = _b.target;\n        var tmpData = (_a = {}, _a[name] = { visible: false }, _a);\n        provider.setData.call(target, tmpData);\n    };\n    return Modal;\n}());\nexports.Modal = Modal;\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar util_1 = __webpack_require__(0);\nexports.defaultProvider = {\n    setData: function (data, cb) {\n        if (!util_1.isObj(this)) {\n            throw new Error();\n        }\n        var set = this.setData || this.setState;\n        // tslint:disable-next-line\n        util_1.isFn(set) && set.call(this, data, cb);\n    },\n    getData: function (key) {\n        var data = this && (this.data || this.state);\n        if (util_1.isObj(data)) {\n            return data[key];\n        }\n    },\n};\n\n\n/***/ })\n/******/ ])));\n//# sourceMappingURL=index.js.map"]}